<div [appLoader]="loader.isLoading$">
  <div class="new-task__container">
    <div class="new-task__header">
    </div>
    <p-tabView>
      <p-tabPanel header="Общее">
        <form [formGroup]="form"
              (ngSubmit)="createOrChangeSubTask()"
        >
          <div class="new-task__wrapper">
            <div class="general__title">
              <h5>Наименование задачи</h5>
              <p-dropdown [options]="allTasks"
                          formControlName="name"
                          placeholder="Выберите задачу"
                          optionLabel="name"
                          [showClear]="true"
                          emptyMessage="Результаты не найдены"
              ></p-dropdown>
            </div>
            <div class="general__input">
              <div class="general__input_container">
                <h5>Дата с:</h5>
                <div class="general__input_time">
                  <p-calendar formControlName="date_start_plan"
                              [showIcon]="true"
                              dateFormat="dd.mm.yy"
                              firstDayOfWeek='1'
                              class="calendar"
                  ></p-calendar>
                  <p-calendar formControlName="time_start_plan"
                              [timeOnly]="true"
                              [showIcon]="true"
                              icon="pi pi-clock"
                  ></p-calendar>
                </div>
              </div>
              <div class="general__input_container">
                <h5>по:</h5>
                <div class="general__input_time">
                  <p-calendar formControlName="date_end_plan"
                              [showIcon]="true"
                              dateFormat="dd.mm.yy"
                              firstDayOfWeek='1'
                              class="calendar"
                  ></p-calendar>
                  <p-calendar formControlName="time_end_plan"
                              [timeOnly]="true"
                              [showIcon]="true"
                              icon="pi pi-clock"
                  ></p-calendar>
                </div>
              </div>
            </div>
            <div class="general__text-field">
              <h5>Примечание</h5>
              <textarea id="input-textarea"
                        rows="5" cols="30"
                        pInputTextarea
                        formControlName="notes"
              ></textarea>
            </div>
          </div>
          <div class="new-task__buttons">
            <p-button label="Создать" type="submit"></p-button>
            <button pButton pRipple type="button" label="Отмена" class="p-button-text p-button-plain"
                    (click)="closeModal()"></button>
          </div>
        </form>
      </p-tabPanel>
      <p-tabPanel header="Подразделения">
        <div class="new-task__wrapper">
          <div class="subdivisions__button">
            <button pButton pRipple type="button" label="Добавить" class="p-button-outlined" icon="pi pi-plus"
                    (click)="addDesantSubdivision()"></button>
          </div>

          <p-table [value]="subdivisions" dataKey="id" editMode="row">
            <ng-template pTemplate="header">
              <tr>
                <th>Дата</th>
                <th>Наименование</th>
                <th>Кол-во чел. / ед.</th>
                <th>Парашют</th>
                <th style="width:8rem"></th>
              </tr>
            </ng-template>
          </p-table>

        </div>
      </p-tabPanel>
      <p-tabPanel header="Документы">
        <div class="new-task__wrapper">
          <app-documents [documentsToShow]="documents" [title]=titleDoc></app-documents>
        </div>
        <div class="new-task__buttons">
          <p-button label="Добавить документы" (onClick)="addSubtaskDocs()"></p-button>
          <button pButton pRipple type="button" label="Отмена" class="p-button-text p-button-plain"
                  (click)="closeModal()"></button>
        </div>
      </p-tabPanel>
    </p-tabView>
  </div>
</div>
